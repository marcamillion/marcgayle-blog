---
layout: post
title: How to change root route behavior in Rails 3
date: 2011-03-14 15:29:00.000000000 -05:00
comments: true
categories:
- rails 3
- rails routes
published: true
---
<p>These instructions have only been tested with declarative_authorization. So while it may work with other authorization gems, I haven't tested it so can't verify. </p>
<p>Say you want your users to see your marketing site (when they try to go to yourapp.com) when they are not logged in, but when they are logged in, you want them to see something different (like the dashboard of your app - which is found by going to your home controller, and index action - 'home#index'), how do you do this in Rails 3? </p>
<p><br>If you put an index.html file in your public directory, that takes precedence over everything else. Rails routing doesn't even execute when that file is included (as far as I understand it anyway). So, you do it like this: In your routes.rb file, change your root route to the following:</p>
<p></p>
<p><a href="https://gist.github.com/869820">https://gist.github.com/869820</a></p>
<p><br>Rename your 'public/index.html' file to some other name, e.g. 'public/marketing.html'. In your home controller, do this:</p>
<p></p>
<p><a href="https://gist.github.com/869828">https://gist.github.com/869828</a></p>
<p>Now, when a user is not logged in, they will be redirected to your static marketing page. But when they are logged in, they will go to your dashboard at home#index. Hope that helps you.</p>
<p>You should follow me on Twitter here: <a href="http://www.twitter.com/marcgayle.&lt;/p">www.twitter.com/marcgayle.</a></p>&gt;
