
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>How to change root route behavior in Rails 3 - The Blog of Marc Gayle</title>
	<meta name="author" content="Marc Gayle">

	
	<meta name="description" content="These instructions have only been tested with declarative_authorization. So while it may work with other authorization gems, I haven&#8217;t tested &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="The Blog of Marc Gayle" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">The Blog of Marc Gayle</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:www.marcgayle.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/marcgayle" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/marcamillion" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:www.marcgayle.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">How to Change Root Route Behavior in Rails 3</h2>
	<div class="entry-content"><p>These instructions have only been tested with declarative_authorization. So while it may work with other authorization gems, I haven&#8217;t tested it so can&#8217;t verify. </p>
<p>Say you want your users to see your marketing site (when they try to go to yourapp.com) when they are not logged in, but when they are logged in, you want them to see something different (like the dashboard of your app - which is found by going to your home controller, and index action - &#8216;home#index&#8217;), how do you do this in Rails 3? </p>
<p><br>If you put an index.html file in your public directory, that takes precedence over everything else. Rails routing doesn&#8217;t even execute when that file is included (as far as I understand it anyway). So, you do it like this: In your routes.rb file, change your root route to the following:</p>
<p></p>
<p><a href="https://gist.github.com/869820">https://gist.github.com/869820</a></p>
<p><br>Rename your &#8216;public/index.html&#8217; file to some other name, e.g. &#8216;public/marketing.html&#8217;. In your home controller, do this:</p>
<p></p>
<p><a href="https://gist.github.com/869828">https://gist.github.com/869828</a></p>
<p>Now, when a user is not logged in, they will be redirected to your static marketing page. But when they are logged in, they will go to your dashboard at home#index. Hope that helps you.</p>
<p>You should follow me on Twitter here: <a href="http://www.twitter.com/marcgayle.&lt;/p">www.twitter.com/marcgayle.</a></p>&gt;
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-03-14T15:29:00-05:00" pubdate data-updated="true">Mar 14<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/rails-3/'>rails 3</a>, <a class='category' href='/blog/categories/rails-routes/'>rails routes</a>


</div>
	
</div></article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Marc Gayle

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'marcgayle';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.marcgayle.com/2011/03/14/how-to-have-a-different-root-path-for-loggedi/';
        var disqus_url = 'http://www.marcgayle.com/2011/03/14/how-to-have-a-different-root-path-for-loggedi/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-93672-8']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>